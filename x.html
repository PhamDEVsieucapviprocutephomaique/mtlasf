<!DOCTYPE html>
<html>
  <head>
    <title>Upload Ảnh</title>
  </head>
  <body>
    <h1>Upload Ảnh lên Google Photos</h1>
    <input type="file" id="imageInput" accept="image/*" />
    <button onclick="uploadImage()">Upload</button>
    <div id="result"></div>

    <script>
      async function uploadImage() {
        const fileInput = document.getElementById("imageInput");
        const file = fileInput.files[0];

        if (!file) {
          alert("Chọn ảnh đi!");
          return;
        }

        const formData = new FormData();
        formData.append("image", file);

        try {
          const response = await fetch(
            "http://localhost:8000/api/upload/upload",
            {
              method: "POST",
              body: formData,
            }
          );

          const result = await response.json();

          if (result.success) {
            document.getElementById("result").innerHTML = `
                        <h3>Upload thành công!</h3>
                        <p><strong>Link ảnh:</strong> ${result.imageUrl}</p>
                        <p><strong>URL đầy đủ:</strong> ${result.productUrl}</p>
                        <img src="${result.imageUrl}=w500" alt="Ảnh" style="max-width: 500px;">
                    `;
          } else {
            document.getElementById(
              "result"
            ).innerHTML = `<p style="color:red;">Lỗi: ${result.error}</p>`;
          }
        } catch (error) {
          document.getElementById(
            "result"
          ).innerHTML = `<p style="color:red;">Lỗi: ${error.message}</p>`;
        }
      }
    </script>
  </body>
</html>
